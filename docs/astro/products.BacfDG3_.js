let t=[],u=0;const r=4;let c=f=>{let s=[],e={get(){return e.lc||e.listen(()=>{})(),e.value},lc:0,listen(l){return e.lc=s.push(l),()=>{for(let i=u+r;i<t.length;)t[i]===l?t.splice(i,r):i+=r;let n=s.indexOf(l);~n&&(s.splice(n,1),--e.lc)}},notify(l,n){let i=!t.length;for(let o of s)t.push(o,e.value,l,n);if(i){for(u=0;u<t.length;u+=r)t[u](t[u+1],t[u+2],t[u+3]);t.length=0}},off(){},set(l){let n=e.value;n!==l&&(e.value=l,e.notify(n))},subscribe(l){let n=e.listen(l);return l(e.value),n},value:f};return e};const a=c(null);export{a as p};
